<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets">

<h:head>
<link href="css/stylesheet.css" rel="stylesheet" type="text/css" />
</h:head>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
  <tr>
    <td><ui:include src="top.xhtml" /></td>
  </tr>
  <tr>
    <td align="center"><table width="900" border="0" cellspacing="0" cellpadding="0">
      <tr>
        <td><table width="100%" border="0" cellspacing="0" cellpadding="0" >
          <tr>
            <td width="240"><ui:include src="left.xhtml" /></td>
            <td align="left" valign="top"><table width="639" border="0" cellspacing="0" cellpadding="0" style="margin-left:20px; margin-top:20px;">
              <tr>
                <td height="38" align="left" valign="middle" class="headline" >Retrieve Password</td>
              </tr>
              <tr>
                <td height="38">&nbsp;</td>
              </tr>
              <tr>
                <td align="left" valign="top">
                <h:form id="form1" name="form1" method="post" action="" >
                  <h:panelGroup layout="block" style=" margin-left:205px; padding-bottom:15px;  width:100%; color:#CC3333; text-align:left;" rendered="#{userManager.passwordfailed}" >Unknown username.</h:panelGroup>
                  <h:panelGroup rendered="#{!userManager.passwordsent}">
                  <table width="100%" border="0" cellspacing="2" cellpadding="0" >
                    <tr>
                      <td width="20">&nbsp;</td>
                      <td width="180">Please enter Username*</td>
                      <td width="160"><p:inputText immediate="false"  id="username" value="#{user.username}"  required="true"  requiredMessage="Username is required" validatorMessage="Invalid username format." >
                      		<f:validateRegex pattern="[\w\.-]*[a-zA-Z0-9_]" />
                      		<f:ajax event="blur"   render="username usernameM" execute="username" />
                      	</p:inputText>
                      	
                      </td>
                      <td ><p:message for="username" id="usernameM" /></td>
                    </tr>
                    <tr>
                      <td>&nbsp;</td>
                      <td>&nbsp;</td>
                      <td>&nbsp;</td>
                      <td>&nbsp;</td>
                    </tr>
                    <tr>
                      <td>&nbsp;</td>
                      <td>&nbsp;</td>
                      <td>
                      <h:commandButton value="Submit"  action="#{userManager.sendPassword}"/>
                      </td>
                      <td>&nbsp;</td>
                    </tr>
                  </table>
                  </h:panelGroup>
                  <h:panelGroup rendered="#{userManager.passwordsent}">
                  <BR/>We sent your password to your email address. <h:outputText value="#{user.emailaddress}"/>
                  </h:panelGroup>
                  
                  </h:form>
                </td>
              </tr>
            </table></td>
          </tr>
        </table></td>
      </tr>
    </table>
      <table width="900" border="0" cellspacing="0" cellpadding="0" style="margin-top:20px;">
        <tr>
          <td height="70" background="images/footer-bg.jpg" style="border:1px solid #A8A8A8;">Copyright &#169;Vidyo.com 2011-2012</td>
        </tr>
      </table></td>
  </tr>
</table>

</body>
</html>